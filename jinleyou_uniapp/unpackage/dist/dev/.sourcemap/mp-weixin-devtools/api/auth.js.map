{"version":3,"names":["jwtDecode","require","checkTokenExpiration","_ref","_asyncToGenerator2","_regeneratorRuntime2","mark","_callee","token","_jwtDecode","exp","wrap","_callee$","_context","prev","next","common_vendor","index","getStorageSync","abrupt","Date","now","t0","__f__","stop","apply","arguments"],"sources":["auth.js"],"sourcesContent":["// utils/auth.js \r\nconst jwtDecode = require('jwt-decode')\nexport const checkTokenExpiration = async () => {\n\tconst token = uni.getStorageSync('token');\n\tif (!token) return null;\n\ttry {\n\t\t// 假设使用JWT解码检查有效期（需安装jwt-decode）\n\t\tconst { exp } = jwtDecode(token);\n\t\treturn Date.now() < exp * 1000 ? token : null;\n\t} catch (error) {\n\t\tconsole.error('Token验证失败:', error);\n\t\treturn null;\n\t}\n};"],"mappings":";;;;;;AACA,IAAMA,SAAA,GAAYC,OAAA,CAAQ,YAAY;AAC1B,IAACC,oBAAA;EAAA,IAAAC,IAAA,GAAAC,kBAAA,eAAAC,oBAAA,GAAAC,IAAA,CAAuB,SAAAC,QAAA;IAAA,IAAAC,KAAA,EAAAC,UAAA,EAAAC,GAAA;IAAA,OAAAL,oBAAA,GAAAM,IAAA,UAAAC,SAAAC,QAAA;MAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;QAAA;UAC7BP,KAAA,GAAQQ,aAAA,CAAAC,KAAA,CAAIC,cAAA,CAAe,OAAO;UAAA,IACnCV,KAAA;YAAAK,QAAA,CAAAE,IAAA;YAAA;UAAA;UAAA,OAAAF,QAAA,CAAAM,MAAA,WAAc;QAAA;UAAAN,QAAA,CAAAC,IAAA;UAAAL,UAAA,GAGFT,SAAA,CAAUQ,KAAK,GAAvBE,GAAA,GAAAD,UAAA,CAAAC,GAAA;UAAA,OAAAG,QAAA,CAAAM,MAAA,WACDC,IAAA,CAAKC,GAAA,EAAK,GAAGX,GAAA,GAAM,MAAOF,KAAA,GAAQ;QAAA;UAAAK,QAAA,CAAAC,IAAA;UAAAD,QAAA,CAAAS,EAAA,GAAAT,QAAA;UAEzCG,aAAA,CAAAC,KAAA,CAAAM,KAAA,+BAAc,cAAAV,QAAA,CAAAS,EAAA,CAAmB;UAAA,OAAAT,QAAA,CAAAM,MAAA,WAC1B;QAAA;QAAA;UAAA,OAAAN,QAAA,CAAAW,IAAA;MAAA;IAAA,GAAAjB,OAAA;EAAA,CAET;EAAA,gBAXaL,qBAAA;IAAA,OAAAC,IAAA,CAAAsB,KAAA,OAAAC,SAAA;EAAA;AAAA,GAWb","ignoreList":[]}