{"version":3,"names":["serviceTypeOptions","form","common_vendor","ref","title","type","duration","price","description","validateForm","fields","key","message","_i","_fields","length","field","value","index","showToast","icon","submitForm","_ref","_asyncToGenerator2","_regeneratorRuntime2","mark","_callee","wrap","_callee$","_context","prev","next","abrupt","isSubmitting","api_http","http","post","setTimeout","navigateBack","t0","__f__","concat","finish","stop","apply","arguments","wx","createPage","_sfc_main"],"sources":["create-guides.vue","cGFnZXMvcGFydG5lci9jcmVhdGUtZ3VpZGVzLnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"form-container\">\n    <scroll-view class=\"form-content\" scroll-y>\n      <form @submit.prevent=\"submitForm\">\n        <!-- 新增标题字段 -->\n        <view class=\"form-section\">\n          <form-field label=\"服务标题\" required>\n            <view class=\"field-tips\">请输入吸引人的服务标题（20字以内）</view>\n            <input\n              v-model=\"form.title\"\n              class=\"form-input\"\n              placeholder=\"例如：专业故宫深度讲解\"\n              maxlength=\"20\"\n            />\n          </form-field>\n        </view>\n\n        <!-- 原有服务类型部分 -->\n        <view class=\"form-section\">\n          <form-field label=\"服务类型\" required>\n            <view class=\"field-tips\">选择您提供的主要服务形式</view>\n            <view class=\"type-grid\">\n              <button\n                v-for=\"type in serviceTypeOptions\"\n                :key=\"type\"\n                :class=\"['type-btn', { active: form.type === type }]\"\n                @click.prevent=\"form.type = type\"\n              >\n                {{ type }}\n              </button>\n            </view>\n          </form-field>\n        </view>\n\n        <!-- 新增时长字段 -->\n        <view class=\"form-section\">\n          <form-field label=\"服务时长（小时）\" required>\n            <view class=\"field-tips\">请输入1-8小时之间的整数</view>\n            <input\n              v-model.number=\"form.duration\"\n              type=\"number\"\n              class=\"form-input\"\n              placeholder=\"例如：3\"\n            />\n          </form-field>\n        </view>\n\n        <!-- 原有价格字段 -->\n        <view class=\"form-section\">\n          <form-field label=\"服务价格（元/天）\" required>\n            <view class=\"field-tips\">请输入合理的每日收费标准</view>\n            <input\n              v-model.number=\"form.price\"\n              type=\"number\"\n              class=\"form-input\"\n              placeholder=\"例如：500\"\n            />\n          </form-field>\n        </view>\n\n        <!-- 原有描述字段 -->\n        <view class=\"form-section\">\n          <form-field label=\"服务描述\" required>\n            <view class=\"field-tips\">包含服务时长、具体内容等重要信息</view>\n            <textarea\n              v-model=\"form.description\"\n              class=\"form-textarea\"\n              placeholder=\"详细描述您的服务内容...\"\n              auto-height\n            />\n          </form-field>\n        </view>\n      </form>\n    </scroll-view>\n\n    <!-- 底部提交按钮保持不变 -->\n    <view class=\"form-footer\">\n      <button class=\"submit-btn\" @click=\"submitForm\">立即发布</button>\n    </view>\n\n    <loading-overlay :visible=\"isSubmitting\" />\n  </view>\n</template>\n\n<script setup>\nimport { ref } from 'vue';\nimport { http } from '@/api/http';\n\nconst serviceTypeOptions = ['景点讲解', '行程规划', '全程陪同', '摄影向导'];\n\nconst form = ref({\n  title: '',      // 新增标题字段\n  type: '',\n  duration: null, // 新增时长字段\n  price: null,\n  description: ''\n});\n\nconst validateForm = () => {\n  const fields = [\n    { key: 'title', message: '请填写服务标题' },\n    { key: 'type', message: '请选择服务类型' },\n    { key: 'duration', message: '请填写服务时长' },\n    { key: 'price', message: '请填写服务价格' },\n    { key: 'description', message: '请填写服务描述' }\n  ];\n\n  for (const field of fields) {\n    if (!form.value[field.key]) {\n      uni.showToast({ title: field.message, icon: 'none' });\n      return false;\n    }\n  }\n\n  if (form.value.duration < 1 || form.value.duration > 8) {\n    uni.showToast({ title: '时长需在1-8小时之间', icon: 'none' });\n    return false;\n  }\n\n  if (form.value.price < 100) {\n    uni.showToast({ title: '价格不能低于100元', icon: 'none' });\n    return false;\n  }\n  \n  return true;\n};\n\nconst submitForm = async () => {\n  if (!validateForm()) return;\n\n  try {\n    isSubmitting.value = true;\n    await http.post('/guide-services', form.value);\n    uni.showToast({ title: '发布成功', icon: 'success' });\n    setTimeout(() => uni.navigateBack(), 1500);\n  } catch (error) {\n    console.error('提交失败:', error);\n    uni.showToast({\n      title: `发布失败: ${error.message || '未知错误'}`,\n      icon: 'none',\n      duration: 3000\n    });\n  } finally {\n    isSubmitting.value = false;\n  }\n};\n\nconst navigateBack = () => {\n  uni.navigateBack();\n};\n</script>\n\n<style lang=\"scss\">\n.form-container {\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  background: #f8fafc;\n}\n\n.form-header {\n  padding: 32rpx 32rpx 24rpx;\n  background: white;\n  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.05);\n  position: relative;\n  \n  .title {\n    font-size: 36rpx;\n    color: #1e293b;\n    text-align: center;\n  }\n  \n  .close-btn {\n    position: absolute;\n    right: 32rpx;\n    top: 50%;\n    transform: translateY(-50%);\n    font-size: 48rpx;\n    color: #94a3b8;\n    background: transparent;\n  }\n}\n\n.form-content {\n  flex: 1;\n  padding: 32rpx 32rpx 160rpx;\n}\n\n.form-section {\n  margin-bottom: 48rpx;\n  background: white;\n  padding: 32rpx;\n  border-radius: 16rpx;\n  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.05);\n}\n\n.field-tips {\n  font-size: 26rpx;\n  color: #94a3b8;\n  margin: 12rpx 0 20rpx;\n  line-height: 1.4;\n}\n\n.type-grid {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 24rpx;\n}\n\n.type-btn {\n  height: 140rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: white;\n  border: 2rpx solid #e2e8f0;\n  border-radius: 16rpx;\n  font-size: 30rpx;\n  color: #64748b;\n  transition: all 0.2s;\n  \n  &.active {\n    border-color: #4369f4;\n    background: rgba(67, 105, 244, 0.05);\n    color: #4369f4;\n  }\n}\n\n.form-input {\n  padding: 28rpx;\n  border: 2rpx solid #e2e8f0;\n  border-radius: 12rpx;\n  font-size: 30rpx;\n  color: #1e293b;\n  background: white;\n  \n  &::placeholder {\n    color: #cbd5e1;\n  }\n}\n\n.form-textarea {\n  min-height: 240rpx;\n  padding: 28rpx;\n  border: 2rpx solid #e2e8f0;\n  border-radius: 12rpx;\n  font-size: 30rpx;\n  color: #1e293b;\n  line-height: 1.6;\n  \n  &::placeholder {\n    color: #cbd5e1;\n  }\n}\n\n.form-footer {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  padding: 24rpx 32rpx;\n  background: white;\n  box-shadow: 0 -4rpx 12rpx rgba(0, 0, 0, 0.05);\n  \n  .submit-btn {\n    background: linear-gradient(135deg, #4369f4, #304ffe);\n    color: white;\n    border-radius: 48rpx;\n    padding: 28rpx;\n    font-size: 32rpx;\n    font-weight: 500;\n    box-shadow: 0 4rpx 16rpx rgba(67, 105, 244, 0.3);\n  }\n}\n</style>","import MiniProgramPage from 'C:/Users/SZQ/Desktop/jinleyou_uniapp/pages/partner/create-guides.vue'\nwx.createPage(MiniProgramPage)"],"mappings":"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","ignoreList":[]}