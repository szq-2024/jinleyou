{"version":3,"names":["activeTab","common_vendor","ref","isLoading","guides","filterDateRange","filterDestination","filterTypes","validServiceTypes","filteredGuides","computed","value","filter","guide","dateValid","length","dayjs","serviceDate","isAfter","isBefore","destinationValid","destination","includes","typeValid","type","loadData","_ref","_asyncToGenerator2","_regeneratorRuntime2","mark","_callee","params","_yield$api_http$http$","data","wrap","_callee$","_context","prev","next","dateStart","dateEnd","api_http","http","get","sent","t0","index","showToast","title","icon","finish","stop","apply","arguments","toggleTypeFilter","indexOf","splice","push","resetFilters","handleDateStart","e","detail","handleDateEnd","onShow","watch","newVal","wx","createPage","MiniProgramPage"],"sources":["index.vue","cGFnZXMvcGFydG5lci9pbmRleC52dWU"],"sourcesContent":["<template>\n  <view class=\"partner-container\">\n    <!-- Â§¥ÈÉ®Âå∫Âüü -->\n    <header class=\"header-section\">\n      <nav class=\"tab-nav\">\n        <button \n          :class=\"['tab-btn', { 'active-tab': activeTab === 'plans' }]\" \n          @click=\"activeTab = 'plans'\"\n        >\n          üó∫Ô∏è ÊóÖË°åËÆ°Âàí\n        </button>\n        <button \n          :class=\"['tab-btn', { 'active-tab': activeTab === 'guides' }]\" \n          @click=\"activeTab = 'guides'\"\n        >\n          üß≠ ÂØºÊ∏∏ÊúçÂä°\n        </button>\n      </nav>\n    </header>\n\n    <!-- ÂÜÖÂÆπÂå∫Âüü -->\n    <main class=\"content-section\">\n      <template v-if=\"activeTab === 'plans'\">\n        <!-- ÂéüÊúâÊóÖË°åËÆ°ÂàíÁ≠õÈÄâ -->\n      </template>\n\n      <template v-else>\n        <!-- ÂØºÊ∏∏ÊúçÂä°Á≠õÈÄâ -->\n        <view class=\"guide-filter-section\">\n          <view class=\"filter-group\">\n            <picker \n              mode=\"date\" \n              :value=\"filterDateRange[0]\" \n              @change=\"handleDateStart\"\n              class=\"filter-input\"\n              fields=\"day\"\n            >\n              <view class=\"picker-content\">\n                {{ filterDateRange[0] || 'ÂºÄÂßãÊó•Êúü' }}\n                <text class=\"icon-calendar\">üìÖ</text>\n              </view>\n            </picker>\n            <text class=\"date-separator\">‚Äî</text>\n            <picker \n              mode=\"date\" \n              :value=\"filterDateRange[1]\" \n              @change=\"handleDateEnd\"\n              class=\"filter-input\"\n              fields=\"day\"\n            >\n              <view class=\"picker-content\">\n                {{ filterDateRange[1] || 'ÁªìÊùüÊó•Êúü' }}\n                <text class=\"icon-calendar\">üìÖ</text>\n              </view>\n            </picker>\n          </view>\n\n          <view class=\"filter-row\">\n            <input \n              v-model=\"filterDestination\"\n              class=\"filter-input destination-input\"\n              placeholder=\"ËæìÂÖ•ÊôØÁÇπÂêçÁß∞\"\n              placeholder-style=\"color: #94a3b8;\"\n              confirm-type=\"search\"\n              @confirm=\"loadData\"\n            />\n            <button \n              class=\"search-btn\"\n              @click=\"loadData\"\n            >\n              üîç\n            </button>\n          </view>\n\n          <view class=\"type-filter\">\n            <text class=\"filter-label\">ÊúçÂä°Á±ªÂûã:</text>\n            <view class=\"tag-container\">\n              <view \n                v-for=\"type in validServiceTypes\"\n                :key=\"type\"\n                :class=\"['type-tag', { 'active-tag': filterTypes.includes(type) }]\"\n                @click=\"toggleTypeFilter(type)\"\n              >\n                {{ type }}\n              </view>\n            </view>\n          </view>\n\n          <view class=\"filter-actions\">\n            <button \n              class=\"reset-btn\"\n              @click=\"resetFilters\"\n            >\n              ÈáçÁΩÆÁ≠õÈÄâ\n            </button>\n            <button \n              class=\"confirm-btn\"\n              @click=\"loadData\"\n              :disabled=\"isLoading\"\n            >\n              {{ isLoading ? 'Âä†ËΩΩ‰∏≠...' : 'Á´ãÂç≥Êü•ËØ¢' }}\n            </button>\n          </view>\n        </view>\n\n        <!-- ÁªìÊûúÂàóË°® -->\n        <view class=\"result-container\">\n          <empty-state \n            v-if=\"filteredGuides.length === 0 && !isLoading\"\n            description=\"Ê≤°ÊúâÊâæÂà∞Á¨¶ÂêàÊù°‰ª∂ÁöÑÊúçÂä°\"\n            action-text=\"Â∞ùËØïË∞ÉÊï¥Á≠õÈÄâÊù°‰ª∂\"\n          />\n          <card-list \n            v-else \n            :items=\"filteredGuides\"\n            type=\"guide\"\n            @item-click=\"startChat\"\n          />\n        </view>\n      </template>\n    </main>\n\n    <!-- ÊÇ¨ÊµÆÊåâÈíÆ -->\n    <view class=\"floating-actions\">\n      <button \n        class=\"fab-button\"\n        @click=\"navigateToCreate(activeTab)\"\n      >\n        <text class=\"fab-icon\">{{ activeTab === 'plans' ? '‚úèÔ∏è' : '‚ú®' }}</text>\n      </button>\n    </view>\n\n    <!-- Âä†ËΩΩÁä∂ÊÄÅ -->\n    <loading-overlay :visible=\"isLoading\" />\n  </view>\n</template>\n\n<script setup>\nimport { ref, computed, watch } from 'vue';\nimport { onShow } from '@dcloudio/uni-app';\nimport dayjs from 'dayjs';\nimport { http } from '@/api/http';\n\n// ÂìçÂ∫îÂºèÁä∂ÊÄÅ\nconst activeTab = ref('guides');\nconst isLoading = ref(false);\nconst guides = ref([]);\nconst filterDateRange = ref([]);\nconst filterDestination = ref('');\nconst filterTypes = ref([]);\nconst validServiceTypes = ref(['ÂéÜÂè≤ËÆ≤Ëß£', 'ÁæéÈ£üÂØºËßà', 'ÂüéÂ∏ÇËßÇÂÖâ', 'Êà∑Â§ñÊé¢Èô©']);\n\n// ËÆ°ÁÆóÂ±ûÊÄß\nconst filteredGuides = computed(() => {\n  return guides.value.filter(guide => {\n    const dateValid = !filterDateRange.value.length || (\n      dayjs(guide.serviceDate).isAfter(filterDateRange.value[0]) &&\n      dayjs(guide.serviceDate).isBefore(filterDateRange.value[1])\n    );\n    const destinationValid = !filterDestination.value || \n      guide.destination.includes(filterDestination.value);\n    const typeValid = !filterTypes.value.length || \n      filterTypes.value.includes(guide.type);\n    return dateValid && destinationValid && typeValid;\n  });\n});\n\n// ÊñπÊ≥ï\nconst loadData = async () => {\n  try {\n    isLoading.value = true;\n    const params = {\n      dateStart: filterDateRange.value[0],\n      dateEnd: filterDateRange.value[1],\n      destination: filterDestination.value,\n      type: filterTypes.value\n    };\n\n    const { data } = await http.get('/api/guide-services', { params });\n    guides.value = data;\n  } catch (error) {\n    uni.showToast({ title: 'Âä†ËΩΩÂ§±Ë¥•', icon: 'none' });\n  } finally {\n    isLoading.value = false;\n  }\n};\n\nconst toggleTypeFilter = (type) => {\n  const index = filterTypes.value.indexOf(type);\n  if (index > -1) {\n    filterTypes.value.splice(index, 1);\n  } else {\n    filterTypes.value.push(type);\n  }\n};\n\nconst resetFilters = () => {\n  filterDateRange.value = [];\n  filterDestination.value = '';\n  filterTypes.value = [];\n  loadData();\n};\n\n// ‰∫ã‰ª∂Â§ÑÁêÜ\nconst handleDateStart = (e) => {\n  filterDateRange.value[0] = e.detail.value;\n};\n\nconst handleDateEnd = (e) => {\n  filterDateRange.value[1] = e.detail.value;\n};\n\n// ÁîüÂëΩÂë®Êúü\nonShow(() => {\n  if (activeTab.value === 'guides') loadData();\n});\n\nwatch(activeTab, (newVal) => {\n  if (newVal === 'guides') loadData();\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.guide-filter-section {\n  padding: 24rpx;\n  background: #fff;\n  border-radius: 16rpx;\n  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.05);\n  margin: 24rpx;\n}\n\n.filter-group {\n  display: flex;\n  align-items: center;\n  gap: 16rpx;\n  margin-bottom: 24rpx;\n}\n\n.filter-input {\n  flex: 1;\n  padding: 20rpx 32rpx;\n  border: 1rpx solid #e2e8f0;\n  border-radius: 8rpx;\n  font-size: 28rpx;\n  color: #334155;\n\n  &.destination-input {\n    flex: 3;\n    margin-right: 16rpx;\n  }\n}\n\n.picker-content {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 20rpx 32rpx;\n  background: #f8fafc;\n  border-radius: 8rpx;\n\n  .icon-calendar {\n    font-size: 36rpx;\n    margin-left: 16rpx;\n  }\n}\n\n.type-filter {\n  margin: 32rpx 0;\n}\n\n.filter-label {\n  font-size: 28rpx;\n  color: #64748b;\n  margin-bottom: 16rpx;\n  display: block;\n}\n\n.tag-container {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 16rpx;\n}\n\n.type-tag {\n  padding: 12rpx 32rpx;\n  border-radius: 40rpx;\n  background: #f1f5f9;\n  color: #64748b;\n  font-size: 26rpx;\n  transition: all 0.2s;\n\n  &.active-tag {\n    background: #4369f4;\n    color: white;\n    box-shadow: 0 4rpx 12rpx rgba(67, 105, 244, 0.2);\n  }\n}\n\n.filter-actions {\n  display: flex;\n  gap: 24rpx;\n  margin-top: 32rpx;\n\n  button {\n    flex: 1;\n    padding: 24rpx;\n    border-radius: 8rpx;\n    font-size: 28rpx;\n  }\n\n  .reset-btn {\n    background: #f8fafc;\n    color: #64748b;\n    border: 1rpx solid #e2e8f0;\n  }\n\n  .confirm-btn {\n    background: linear-gradient(135deg, #4369f4, #304ffe);\n    color: white;\n    box-shadow: 0 4rpx 16rpx rgba(67, 105, 244, 0.2);\n\n    &[disabled] {\n      opacity: 0.7;\n    }\n  }\n}\n\n.result-container {\n  margin-top: 48rpx;\n  min-height: 60vh;\n}\n</style>","import MiniProgramPage from 'C:/Users/SZQ/Desktop/jinleyou_uniapp/pages/partner/index.vue'\nwx.createPage(MiniProgramPage)"],"mappings":"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","ignoreList":[]}