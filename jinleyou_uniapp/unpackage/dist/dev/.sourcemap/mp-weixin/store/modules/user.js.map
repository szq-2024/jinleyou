{"version":3,"file":"user.js","sources":["store/modules/user.js"],"sourcesContent":["// store/modules/user.js\nexport default {\n  namespaced: true,\n  state: () => ({\n    info: uni.getStorageSync('userInfo') || {},\n    token: null\n  }),\n\tmutations: {\n\t\tSET_INFO(state, payload) {\n\t\t\tstate.info = payload;\r\n\t\t\tuni.setStorageSync('userInfo', payload);\n\t\t},\n\t\tSET_TOKEN(state, token) {\n\t\t\tstate.token = token\n\t\t},\n\t\tCLEAR_ALL(state) {\n\t\t\tstate.info = null\n\t\t\tstate.token = null\n\t\t}\n\t},\n  actions: {\n    async fetchUserInfo({ commit }) {\n      try {\n        const data = await api.user.getInfo()\n        commit('SET_INFO', data)\n        return data\n      } catch (error) {\n        commit('CLEAR_ALL')\n        throw error\n      }\n    },\r\n\tasync checkTokenValidity({ commit, state }) {\r\n\t    try {\r\n\t      // 示例：验证token有效性\r\n\t      await api.validateToken(state.token); // 假设存在API方法\r\n\t      // 如果有效，可能不需要额外操作\r\n\t    } catch (error) {\r\n\t      commit('CLEAR_ALL'); // 无效则清除状态\r\n\t      throw error;\r\n\t    }\r\n\t  }\n  },\n  getters: {\n    isLoggedIn: state => !!state.token,\n    userInfo: state => state.info || {}\n  }\n}"],"names":["uni"],"mappings":";;AACA,MAAe,OAAA;AAAA,EACb,YAAY;AAAA,EACZ,OAAO,OAAO;AAAA,IACZ,MAAMA,cAAG,MAAC,eAAe,UAAU,KAAK,CAAE;AAAA,IAC1C,OAAO;AAAA,EACX;AAAA,EACC,WAAW;AAAA,IACV,SAAS,OAAO,SAAS;AACxB,YAAM,OAAO;AACbA,oBAAAA,MAAI,eAAe,YAAY,OAAO;AAAA,IACtC;AAAA,IACD,UAAU,OAAO,OAAO;AACvB,YAAM,QAAQ;AAAA,IACd;AAAA,IACD,UAAU,OAAO;AAChB,YAAM,OAAO;AACb,YAAM,QAAQ;AAAA,IACd;AAAA,EACD;AAAA,EACA,SAAS;AAAA,IACP,MAAM,cAAc,EAAE,UAAU;AAC9B,UAAI;AACF,cAAM,OAAO,MAAM,IAAI,KAAK,QAAS;AACrC,eAAO,YAAY,IAAI;AACvB,eAAO;AAAA,MACR,SAAQ,OAAO;AACd,eAAO,WAAW;AAClB,cAAM;AAAA,MACP;AAAA,IACF;AAAA,IACJ,MAAM,mBAAmB,EAAE,QAAQ,SAAS;AACxC,UAAI;AAEF,cAAM,IAAI,cAAc,MAAM,KAAK;AAAA,MAEpC,SAAQ,OAAO;AACd,eAAO,WAAW;AAClB,cAAM;AAAA,MACP;AAAA,IACF;AAAA,EACD;AAAA,EACD,SAAS;AAAA,IACP,YAAY,WAAS,CAAC,CAAC,MAAM;AAAA,IAC7B,UAAU,WAAS,MAAM,QAAQ,CAAE;AAAA,EACpC;AACH;;"}