{"version":3,"file":"my_likes.js","sources":["pages/my/my_likes.vue","../Programming/HBuilderX.4.57.2025032507/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbXkvbXlfbGlrZXMudnVl"],"sourcesContent":["<template>\n  <view class=\"likes-container\">\n    <!-- 导航栏 -->\n    <uni-nav-bar \n      title=\"我的点赞\" \n      left-icon=\"back\" \n      @clickLeft=\"goBack\"\n      :border=\"false\"\n      fixed\n    />\n    \n    <!-- 点赞列表 -->\n    <scroll-view \n      scroll-y \n      class=\"like-list\"\n      refresher-enabled\n      :refresher-triggered=\"refreshing\"\n      @refresherrefresh=\"onRefresh\"\n      @scrolltolower=\"loadMore\"\n    >\n      <!-- 点赞项 -->\n      <view \n        v-for=\"(item, index) in likeList\" \n        :key=\"item.id\" \n        class=\"like-item\"\n        @click=\"viewLikedContent(item)\"\n      >\n        <view class=\"like-header\">\n          <image \n            class=\"avatar\" \n            :src=\"item.author.avatar || '/static/default-avatar.png'\" \n            mode=\"aspectFill\" \n          />\n          <view class=\"user-info\">\n            <text class=\"username\">{{ item.author.nickname }}</text>\n            <text class=\"time\">{{ formatTime(item.create_time) }}</text>\n          </view>\n          <view class=\"like-type\" :class=\"`type-${item.content_type}`\">\n            {{ getContentType(item.content_type) }}\n          </view>\n        </view>\n        \n        <view class=\"like-content\">\n          <text class=\"content-text\">{{ item.content_summary }}</text>\n          <image \n            v-if=\"item.cover_image\" \n            class=\"content-image\" \n            :src=\"item.cover_image\" \n            mode=\"aspectFill\"\n          />\n        </view>\n      </view>\n      \n      <!-- 加载状态 -->\n      <view class=\"loading-state\">\n        <text v-if=\"loading\" class=\"loading-text\">加载中...</text>\n        <text v-if=\"noMore\" class=\"no-more-text\">没有更多了</text>\n      </view>\n      \n      <!-- 空状态 -->\n      <view v-if=\"likeList.length === 0 && !loading\" class=\"empty-container\">\n        <image src=\"/static/empty-like.png\" class=\"empty-image\" />\n        <text class=\"empty-text\">暂无点赞内容</text>\n        <text class=\"empty-subtext\">快去发现并点赞你喜欢的内容吧</text>\n        <button class=\"discover-btn\" @click=\"goDiscover\">去发现</button>\n      </view>\n    </scroll-view>\n  </view>\n</template>\n\n<script>\nimport { formatTime } from '@/utils/util.js';\n\nexport default {\n  data() {\n    return {\n      likeList: [],\n      page: 1,\n      pageSize: 10,\n      loading: false,\n      noMore: false,\n      refreshing: false\n    };\n  },\n  onLoad() {\n    this.loadLikes();\n  },\n  methods: {\n    // 加载点赞列表\n    async loadLikes() {\n      if (this.loading) return;\n      \n      this.loading = true;\n      try {\n        const res = await uni.request({\n          url: '/api/likes/my',\n          method: 'GET',\n          data: {\n            page: this.page,\n            page_size: this.pageSize\n          },\n          header: {\n            'Authorization': uni.getStorageSync('token')\n          }\n        });\n        \n        if (res.data.code === 200) {\n          const data = res.data.data;\n          this.likeList = this.page === 1 ? data.list : [...this.likeList, ...data.list];\n          this.noMore = data.list.length < this.pageSize;\n        }\n      } catch (error) {\n        console.error('获取点赞列表失败:', error);\n        uni.showToast({\n          title: '获取点赞列表失败',\n          icon: 'none'\n        });\n      } finally {\n        this.loading = false;\n        this.refreshing = false;\n      }\n    },\n    \n    // 下拉刷新\n    onRefresh() {\n      this.refreshing = true;\n      this.page = 1;\n      this.loadLikes();\n    },\n    \n    // 上拉加载更多\n    loadMore() {\n      if (this.loading || this.noMore) return;\n      this.page++;\n      this.loadLikes();\n    },\n    \n    // 查看点赞内容\n    viewLikedContent(item) {\n      let url = '';\n      switch (item.content_type) {\n        case 'article':\n          url = `/pages/article/detail?id=${item.content_id}`;\n          break;\n        case 'video':\n          url = `/pages/video/detail?id=${item.content_id}`;\n          break;\n        case 'product':\n          url = `/pages/product/detail?id=${item.content_id}`;\n          break;\n        default:\n          return;\n      }\n      uni.navigateTo({ url });\n    },\n    \n    // 获取内容类型文本\n    getContentType(type) {\n      const typeMap = {\n        article: '文章',\n        video: '视频',\n        product: '商品'\n      };\n      return typeMap[type] || '内容';\n    },\n    \n    // 格式化时间\n    formatTime,\n    \n    // 去发现页\n    goDiscover() {\n      uni.switchTab({\n        url: '/pages/discover/index'\n      });\n    },\n    \n    // 返回\n    goBack() {\n      uni.navigateBack();\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.likes-container {\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  background-color: #f5f5f5;\n  \n  .like-list {\n    flex: 1;\n    padding: 20rpx;\n    \n    .like-item {\n      background-color: #fff;\n      border-radius: 12rpx;\n      padding: 24rpx;\n      margin-bottom: 20rpx;\n      box-shadow: 0 2rpx 6rpx rgba(0, 0, 0, 0.05);\n      \n      .like-header {\n        display: flex;\n        align-items: center;\n        margin-bottom: 20rpx;\n        position: relative;\n        \n        .avatar {\n          width: 80rpx;\n          height: 80rpx;\n          border-radius: 50%;\n          margin-right: 20rpx;\n        }\n        \n        .user-info {\n          flex: 1;\n          display: flex;\n          flex-direction: column;\n          \n          .username {\n            font-size: 28rpx;\n            font-weight: bold;\n            margin-bottom: 6rpx;\n          }\n          \n          .time {\n            font-size: 24rpx;\n            color: #999;\n          }\n        }\n        \n        .like-type {\n          position: absolute;\n          right: 0;\n          top: 0;\n          font-size: 24rpx;\n          padding: 4rpx 12rpx;\n          border-radius: 20rpx;\n          background-color: #f0f0f0;\n          color: #666;\n          \n          &.type-article {\n            background-color: #e6f7ff;\n            color: #1890ff;\n          }\n          \n          &.type-video {\n            background-color: #fff0f6;\n            color: #eb2f96;\n          }\n          \n          &.type-product {\n            background-color: #fff7e6;\n            color: #fa8c16;\n          }\n        }\n      }\n      \n      .like-content {\n        .content-text {\n          font-size: 28rpx;\n          line-height: 1.6;\n          color: #333;\n          display: -webkit-box;\n          -webkit-box-orient: vertical;\n          -webkit-line-clamp: 3;\n          overflow: hidden;\n          margin-bottom: 16rpx;\n        }\n        \n        .content-image {\n          width: 100%;\n          height: 300rpx;\n          border-radius: 8rpx;\n        }\n      }\n    }\n    \n    .loading-state {\n      text-align: center;\n      padding: 30rpx 0;\n      \n      .loading-text {\n        font-size: 26rpx;\n        color: #999;\n      }\n      \n      .no-more-text {\n        font-size: 26rpx;\n        color: #ccc;\n      }\n    }\n    \n    .empty-container {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      padding-top: 100rpx;\n      \n      .empty-image {\n        width: 300rpx;\n        height: 300rpx;\n        margin-bottom: 30rpx;\n      }\n      \n      .empty-text {\n        font-size: 32rpx;\n        color: #666;\n        margin-bottom: 16rpx;\n      }\n      \n      .empty-subtext {\n        font-size: 26rpx;\n        color: #999;\n        margin-bottom: 40rpx;\n      }\n      \n      .discover-btn {\n        width: 200rpx;\n        height: 70rpx;\n        line-height: 70rpx;\n        font-size: 28rpx;\n        background-color: #ff5a5f;\n        color: #fff;\n        border-radius: 35rpx;\n      }\n    }\n  }\n}\n</style>","import MiniProgramPage from 'C:/Users/SZQ/Desktop/jinleyou_uniapp/pages/my/my_likes.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","formatTime"],"mappings":";;;;AAyEA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,UAAU,CAAE;AAAA,MACZ,MAAM;AAAA,MACN,UAAU;AAAA,MACV,SAAS;AAAA,MACT,QAAQ;AAAA,MACR,YAAY;AAAA;EAEf;AAAA,EACD,SAAS;AACP,SAAK,UAAS;AAAA,EACf;AAAA,EACD,SAAS;AAAA;AAAA,IAEP,MAAM,YAAY;AAChB,UAAI,KAAK;AAAS;AAElB,WAAK,UAAU;AACf,UAAI;AACF,cAAM,MAAM,MAAMA,cAAG,MAAC,QAAQ;AAAA,UAC5B,KAAK;AAAA,UACL,QAAQ;AAAA,UACR,MAAM;AAAA,YACJ,MAAM,KAAK;AAAA,YACX,WAAW,KAAK;AAAA,UACjB;AAAA,UACD,QAAQ;AAAA,YACN,iBAAiBA,cAAAA,MAAI,eAAe,OAAO;AAAA,UAC7C;AAAA,QACF,CAAC;AAED,YAAI,IAAI,KAAK,SAAS,KAAK;AACzB,gBAAM,OAAO,IAAI,KAAK;AACtB,eAAK,WAAW,KAAK,SAAS,IAAI,KAAK,OAAO,CAAC,GAAG,KAAK,UAAU,GAAG,KAAK,IAAI;AAC7E,eAAK,SAAS,KAAK,KAAK,SAAS,KAAK;AAAA,QACxC;AAAA,MACA,SAAO,OAAO;AACdA,sBAAc,MAAA,MAAA,SAAA,gCAAA,aAAa,KAAK;AAChCA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACR,CAAC;AAAA,MACH,UAAU;AACR,aAAK,UAAU;AACf,aAAK,aAAa;AAAA,MACpB;AAAA,IACD;AAAA;AAAA,IAGD,YAAY;AACV,WAAK,aAAa;AAClB,WAAK,OAAO;AACZ,WAAK,UAAS;AAAA,IACf;AAAA;AAAA,IAGD,WAAW;AACT,UAAI,KAAK,WAAW,KAAK;AAAQ;AACjC,WAAK;AACL,WAAK,UAAS;AAAA,IACf;AAAA;AAAA,IAGD,iBAAiB,MAAM;AACrB,UAAI,MAAM;AACV,cAAQ,KAAK,cAAY;AAAA,QACvB,KAAK;AACH,gBAAM,4BAA4B,KAAK,UAAU;AACjD;AAAA,QACF,KAAK;AACH,gBAAM,0BAA0B,KAAK,UAAU;AAC/C;AAAA,QACF,KAAK;AACH,gBAAM,4BAA4B,KAAK,UAAU;AACjD;AAAA,QACF;AACE;AAAA,MACJ;AACAA,oBAAAA,MAAI,WAAW,EAAE,IAAE,CAAG;AAAA,IACvB;AAAA;AAAA,IAGD,eAAe,MAAM;AACnB,YAAM,UAAU;AAAA,QACd,SAAS;AAAA,QACT,OAAO;AAAA,QACP,SAAS;AAAA;AAEX,aAAO,QAAQ,IAAI,KAAK;AAAA,IACzB;AAAA;AAAA,gBAGDC,WAAU;AAAA;AAAA,IAGV,aAAa;AACXD,oBAAAA,MAAI,UAAU;AAAA,QACZ,KAAK;AAAA,MACP,CAAC;AAAA,IACF;AAAA;AAAA,IAGD,SAAS;AACPA,oBAAG,MAAC,aAAY;AAAA,IAClB;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpLA,GAAG,WAAW,eAAe;"}