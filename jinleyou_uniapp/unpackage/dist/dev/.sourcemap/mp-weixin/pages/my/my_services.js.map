{"version":3,"file":"my_services.js","sources":["pages/my/my_services.vue","../../Programming/HBuilderX.4.57.2025032507/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbXkvbXlfc2VydmljZXMudnVl"],"sourcesContent":["<template>\n  <view class=\"container\">\n    <!-- 内容区域 -->\n    <view class=\"content\">\n      <empty-state\n        v-if=\"!isLoading && services.length === 0\"\n        description=\"您还没有发布过导游服务\"\n        action-text=\"立即发布\"\n        @action=\"navigateToCreate\"\n      />\n      <card-list\r\n        v-else\r\n        :items=\"services\"\r\n        type=\"guide\"\r\n        show-delete\r\n        :show-chat=\"false\"\r\n        @delete=\"handleDelete\"\r\n      />\n    </view>\n\n    <!-- 加载状态 -->\n    <loading-overlay :visible=\"isLoading\" />\n  </view>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue';\nimport { http } from '@/api/http';\nimport CardList from '@/components/CardList.vue';\nimport EmptyState from '@/components/EmptyState.vue';\nimport LoadingOverlay from '@/components/LoadingOverlay.vue';\n\nconst services = ref([]);\nconst isLoading = ref(false);\n\n// 获取用户服务列表\nconst fetchServices = async () => {\n  try {\n    isLoading.value = true;\n    const response = await http.get('/api/guide-services/my');\n    services.value = response.data;\n  } catch (error) {\n    console.error('获取服务失败:', error);\n    uni.showToast({ title: '数据加载失败', icon: 'none' });\n  } finally {\n    isLoading.value = false;\n  }\n};\n\n// 处理删除操作\nconst handleDelete = async (item) => {\n  try {\n    const { confirm } = await uni.showModal({\n      title: '确认删除',\n      content: '确定要删除这个服务吗？删除后不可恢复',\n    });\n    \n    if (!confirm) return;\n\n    await http.delete(`/api/guide-services/${item.id}`);\n    services.value = services.value.filter(s => s.id !== item.id);\n    uni.showToast({ title: '删除成功', icon: 'success' });\n  } catch (error) {\n    console.error('删除失败:', error);\n    uni.showToast({ title: '删除失败', icon: 'none' });\n  }\n};\n\n// 跳转到创建页面\nconst navigateToCreate = () => {\n  uni.navigateTo({\n    url: '/pages/partner/create-guides'\n  });\n};\n\nonMounted(() => {\n  fetchServices();\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.container {\n  padding: 32rpx;\n  min-height: 100vh;\n  background-color: #f8f9fb;\n}\n\n.header {\n  padding: 40rpx 0;\n  \n  .title {\n    font-size: 36rpx;\n    font-weight: 600;\n    color: #333;\n  }\n}\n\n.content {\n  margin-top: 24rpx;\n}\n</style>","import MiniProgramPage from 'C:/Users/SZQ/Desktop/jinleyou_GitHub/jinleyou_uniapp/pages/my/my_services.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","http","uni","onMounted"],"mappings":";;;;;;AA4BA,MAAM,WAAW,MAAW;AAC5B,MAAM,aAAa,MAAW;AAC9B,MAAM,iBAAiB,MAAW;;;;AAElC,UAAM,WAAWA,cAAAA,IAAI,CAAA,CAAE;AACvB,UAAM,YAAYA,cAAAA,IAAI,KAAK;AAG3B,UAAM,gBAAgB,YAAY;AAChC,UAAI;AACF,kBAAU,QAAQ;AAClB,cAAM,WAAW,MAAMC,SAAAA,KAAK,IAAI,wBAAwB;AACxD,iBAAS,QAAQ,SAAS;AAAA,MAC3B,SAAQ,OAAO;AACdC,sBAAA,MAAA,MAAA,SAAA,kCAAc,WAAW,KAAK;AAC9BA,sBAAG,MAAC,UAAU,EAAE,OAAO,UAAU,MAAM,OAAM,CAAE;AAAA,MACnD,UAAY;AACR,kBAAU,QAAQ;AAAA,MACnB;AAAA,IACH;AAGA,UAAM,eAAe,OAAO,SAAS;AACnC,UAAI;AACF,cAAM,EAAE,QAAO,IAAK,MAAMA,cAAAA,MAAI,UAAU;AAAA,UACtC,OAAO;AAAA,UACP,SAAS;AAAA,QACf,CAAK;AAED,YAAI,CAAC;AAAS;AAEd,cAAMD,SAAAA,KAAK,OAAO,uBAAuB,KAAK,EAAE,EAAE;AAClD,iBAAS,QAAQ,SAAS,MAAM,OAAO,OAAK,EAAE,OAAO,KAAK,EAAE;AAC5DC,sBAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,UAAS,CAAE;AAAA,MACjD,SAAQ,OAAO;AACdA,6EAAc,SAAS,KAAK;AAC5BA,sBAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,OAAM,CAAE;AAAA,MAC9C;AAAA,IACH;AAGA,UAAM,mBAAmB,MAAM;AAC7BA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK;AAAA,MACT,CAAG;AAAA,IACH;AAEAC,kBAAAA,UAAU,MAAM;AACd;IACF,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5ED,GAAG,WAAW,eAAe;"}