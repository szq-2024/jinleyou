{"version":3,"file":"my_trips.js","sources":["pages/my/my_trips.vue","../Programming/HBuilderX.4.57.2025032507/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbXkvbXlfdHJpcHMudnVl"],"sourcesContent":["<template>\n  <view class=\"partner-container\">\n    <!-- 内容区域 -->\n    <main class=\"content-section\">\n      <empty-state \n        v-if=\"trips.length === 0 && !isLoading\"\n        description=\"您还没有发布过行程\"\n        action-text=\"创建行程\"\n        @action=\"navigateToCreate\"\n      />\n      <view class=\"trip-list\">\n        <view \n          v-for=\"(item, index) in trips\"\n          :key=\"index\"\n          class=\"trip-card\"\n        >\n          <text class=\"type-tag plan-tag\">我的行程</text>\n          <view class=\"card-content\">\n            <view class=\"card-header\">\n              <text class=\"card-title\">{{ item.title }}</text>\n              <text class=\"card-time\">\n                日期：{{ dayjs(item.date).format('YY/MM/DD') }}\n              </text>\n            </view>\n            <view class=\"card-meta\">\n              <text class=\"card-location\">地点：{{ item.destination }}</text>\n              <text class=\"card-preference\">偏好：{{ item.preference }}</text>\n            </view>\n            <text class=\"card-desc\">描述：{{ item.description }}</text>\n          </view>\n          <button \n            class=\"delete-button\"\n            @click=\"handleDelete(item.id)\"\n          >\n            删除\n          </button>\n        </view>\n      </view>\n    </main>\n\n    <!-- 加载状态 -->\n    <loading-overlay :visible=\"isLoading\" />\n  </view>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue';\nimport dayjs from 'dayjs';\nimport { http } from '@/api/http';\nimport EmptyState from '@/components/EmptyState.vue';\nimport LoadingOverlay from '@/components/LoadingOverlay.vue';\n\nconst trips = ref([]);\nconst isLoading = ref(false);\n\n// 获取用户行程\nconst fetchTrips = async () => {\n  try {\n    isLoading.value = true;\n    const response = await http.get('/api/travel-plans/my');\n    trips.value = response.data;\n  } catch (error) {\n    console.error('获取失败:', error);\n  } finally {\n    isLoading.value = false;\n  }\n};\n\n// 删除行程\nconst handleDelete = async (id) => {\n  try {\r\n\tconst { confirm } = await uni.showModal({\r\n\t  title: '确认删除',\r\n\t  content: '确定要删除这个服务吗？删除后不可恢复',\r\n\t});\n    await http.delete(`/api/travel-plans/${id}`);\n    uni.showToast({ title: '删除成功', icon: 'success' });\n    trips.value = trips.value.filter(item => item.id !== id);\n  } catch (error) {\n    uni.showToast({ title: '删除失败', icon: 'none' });\n  }\n};\n\n// 导航到创建页\nconst navigateToCreate = () => {\n  uni.navigateTo({\n    url: '/pages/partner/create-plans'\n  });\n};\n\nonMounted(fetchTrips);\n</script>\n\n<style lang=\"scss\" scoped>\r\n.partner-container {\n  background: #f7f7f7;  /* 改为你的目标背景色 */\n  min-height: 100vh;\n}\n.page-title {\n  font-size: 36rpx;\n  font-weight: 600;\n  padding: 32rpx;\n  display: block;\n  color: white;\n}\n\n.trip-list {\n  padding: 32rpx;\n}\n\n.trip-card {\n  position: relative;\n  background: white;\n  border-radius: 24rpx;\n  padding: 32rpx;\n  margin-bottom: 24rpx;\n  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.05);\n}\n\n.delete-button {\n  position: absolute;\n  right: 32rpx;\n  top: 50%;\n  transform: translateY(-50%);\n  background: #4cd964;\n  color: white;\n  padding: 16rpx 32rpx;\n  border-radius: 40rpx;\n  font-size: 28rpx;\n}\n\n/* 复用原有卡片样式 */\n.card-content {\n  padding-right: 160rpx;\n\n  .card-header {\n    display: flex;\n    flex-direction: column;\n    gap: 8rpx;\n    margin-top: 36rpx;\n    margin-bottom: 12rpx;\n  }\n\n  .card-title {\n    font-size: 32rpx;\n    font-weight: 500;\n  }\n\n  .card-time {\n    color: #666;\n    font-size: 26rpx;\n  }\n\n  .card-meta {\n    display: flex;\n    gap: 20rpx;\n    margin: 8rpx 0;\n    font-size: 26rpx;\n    color: #666;\n  }\n\n  .card-desc {\n    color: #888;\n    font-size: 28rpx;\n    line-height: 1.4;\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n    -webkit-line-clamp: 2;\n    overflow: hidden;\n  }\n}\n\n.type-tag {\n  position: absolute;\n  top: 24rpx;\n  left: 24rpx;\n  padding: 6rpx 16rpx;\n  border-radius: 8rpx;\n  font-size: 24rpx;\n  font-weight: 500;\n  background: #e6f4ff;\n  color: #1890ff;\n}\n</style>","import MiniProgramPage from 'C:/Users/SZQ/Desktop/jinleyou_uniapp/pages/my/my_trips.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","http","uni","onMounted"],"mappings":";;;;;;AAiDA,MAAM,aAAa,MAAW;AAC9B,MAAM,iBAAiB,MAAW;;;;AAElC,UAAM,QAAQA,cAAAA,IAAI,CAAA,CAAE;AACpB,UAAM,YAAYA,cAAAA,IAAI,KAAK;AAG3B,UAAM,aAAa,YAAY;AAC7B,UAAI;AACF,kBAAU,QAAQ;AAClB,cAAM,WAAW,MAAMC,SAAAA,KAAK,IAAI,sBAAsB;AACtD,cAAM,QAAQ,SAAS;AAAA,MACxB,SAAQ,OAAO;AACdC,0EAAc,SAAS,KAAK;AAAA,MAChC,UAAY;AACR,kBAAU,QAAQ;AAAA,MACnB;AAAA,IACH;AAGA,UAAM,eAAe,OAAO,OAAO;AACjC,UAAI;AACL,cAAM,EAAE,QAAO,IAAK,MAAMA,cAAAA,MAAI,UAAU;AAAA,UACtC,OAAO;AAAA,UACP,SAAS;AAAA,QACZ,CAAE;AACE,cAAMD,SAAAA,KAAK,OAAO,qBAAqB,EAAE,EAAE;AAC3CC,sBAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,UAAS,CAAE;AAChD,cAAM,QAAQ,MAAM,MAAM,OAAO,UAAQ,KAAK,OAAO,EAAE;AAAA,MACxD,SAAQ,OAAO;AACdA,sBAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,OAAM,CAAE;AAAA,MAC9C;AAAA,IACH;AAGA,UAAM,mBAAmB,MAAM;AAC7BA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK;AAAA,MACT,CAAG;AAAA,IACH;AAEAC,kBAAS,UAAC,UAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzFpB,GAAG,WAAW,eAAe;"}