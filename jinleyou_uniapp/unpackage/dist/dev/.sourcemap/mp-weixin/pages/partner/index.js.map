{"version":3,"file":"index.js","sources":["pages/partner/index.vue","../Programming/HBuilderX.4.57.2025032507/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcGFydG5lci9pbmRleC52dWU"],"sourcesContent":["<template>\n  <view class=\"partner-container\">\n    <!-- Â§¥ÈÉ®Âå∫Âüü -->\n    <header class=\"header-section\">\n      <nav class=\"tab-nav\">\n        <button \n          :class=\"['tab-btn', { 'active-tab': activeTab === 'plans' }]\" \n          @click=\"activeTab = 'plans'\"\n        >\n          üó∫Ô∏è ÊóÖË°åËÆ°Âàí\n        </button>\n        <button \n          :class=\"['tab-btn', { 'active-tab': activeTab === 'guides' }]\" \n          @click=\"activeTab = 'guides'\"\n        >\n          üß≠ ÂØºÊ∏∏ÊúçÂä°\n        </button>\n      </nav>\n    </header>\n\n    <!-- ÂÜÖÂÆπÂå∫Âüü -->\n    <main class=\"content-section\">\n      <template v-if=\"activeTab === 'plans'\">\n        <empty-state v-if=\"filteredPlans.length === 0\" \n          description=\"ÊöÇÊó∂Ê≤°ÊúâÊâæÂà∞ÊóÖË°åËÆ°Âàí\"\n          action-text=\"ÂàõÂª∫ËÆ°Âàí\"\n          @action=\"navigateToCreate('plan')\"\n        />\n        <card-list v-else :items=\"filteredPlans\" type=\"plan\" @item-click=\"startChat\" />\n      </template>\n\n      <template v-else>\n        <empty-state v-if=\"filteredGuides.length === 0\"\n          description=\"ÊöÇÊó∂Ê≤°ÊúâÂèØÈ¢ÑÁ∫¶ÁöÑÂØºÊ∏∏\"\n          action-text=\"ÂèëÂ∏ÉÊúçÂä°\"\n          @action=\"navigateToCreate('guide')\"\n        />\n        <card-list \r\n          v-else \r\n          :items=\"filteredGuides\" \r\n          type=\"guide\" \r\n          @item-click=\"startChat\"\r\n          @chat=\"startChat\" \r\n        />\n      </template>\n    </main>\n\n    <!-- ÊÇ¨ÊµÆÊìç‰ΩúÊåâÈíÆ -->\n    <view class=\"floating-actions\">\n      <button class=\"fab-button\" @click=\"navigateToCreate(activeTab)\">\n        <text class=\"fab-icon\">{{ activeTab === 'plans' ? '‚úèÔ∏è' : '‚ú®' }}</text>\n      </button>\n    </view>\n\n    <!-- Âä†ËΩΩÁä∂ÊÄÅ -->\n    <loading-overlay :visible=\"isLoading\" />\n  </view>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from 'vue';\r\nimport { onShow } from '@dcloudio/uni-app'; // Ê∑ªÂä†È°µÈù¢ÁîüÂëΩÂë®ÊúüÈí©Â≠ê\nimport dayjs from 'dayjs';\nimport { http } from '@/api/http';\n\n// ÁªÑ‰ª∂\nimport EmptyState from '@/components/EmptyState.vue';\nimport CardList from '@/components/CardList.vue';\nimport LoadingOverlay from '@/components/LoadingOverlay.vue';\n\nconst activeTab = ref('plans');\nconst isLoading = ref(false);\nconst plans = ref([]);\nconst guides = ref([]);\nconst loadData = () => {\n  Promise.all([fetchPlans(), fetchGuides()]);\n};\n// ËÆ°ÁÆóÂ±ûÊÄß\nconst filteredPlans = computed(() => {\n  return plans.value.filter(plan => \n    dayjs(plan.date).isSameOrAfter(dayjs().startOf('day'))\n  );\n});\n\nconst filteredGuides = computed(() => guides.value);\n\n// ÊñπÊ≥ï\nconst navigateToCreate = (type) => {\n  uni.navigateTo({\n    url: `/pages/partner/create-${type}`\n  });\n};\n\nconst startChat = (item) => {\n  // Êîπ‰∏∫Ê£ÄÊü• user_id Â≠óÊÆµ\n  if (!item?.user?.id) {\r\n      console.error('Invalid user data:', item);\r\n      return;\r\n    }\n  \n  uni.navigateTo({\n    url: `/pages/chat/chat?userId=${item.user.id}&title=${encodeURIComponent(item.title)}`\n  });\n};\n\n// Êï∞ÊçÆËé∑Âèñ\nconst fetchData = async (url) => {\n  try {\n    isLoading.value = true;\n    const response = await http.get(url);\n    return response.data || [];\n  } catch (error) {\n    console.error('Êï∞ÊçÆËé∑ÂèñÂ§±Ë¥•:', error);\n    return [];\n  } finally {\n    isLoading.value = false;\n  }\n};\n\nconst fetchPlans = async () => {\n  plans.value = await fetchData('/api/travel-plans');\n};\n\nconst fetchGuides = async () => {\n  guides.value = await fetchData('/api/guide-services');\n};\nonShow(() => {\n  loadData();\n});\nonMounted(() => {\n  Promise.all([fetchPlans(), fetchGuides()]);\n});\n</script>\n\n<style lang=\"scss\">\n.partner-container {\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  background: #f8f9fb;\n}\n\n.header-section {\n  padding: 24rpx 32rpx;\n  background: linear-gradient(135deg, #4369f4 0%, #284bce 100%);\n  color: white;\n  border-radius: 0 0 40rpx 40rpx;\n  box-shadow: 0 8rpx 40rpx rgba(66, 133, 244, 0.15);\n}\n\n.tab-nav {\n  display: flex;\n  gap: 32rpx;\n  margin-top: 32rpx;\n}\n\n.tab-btn {\n  padding: 16rpx 48rpx;\n  border-radius: 40rpx;\n  background: rgba(255, 255, 255, 0.15);\n  font-size: 28rpx;\n  transition: all 0.3s;\n\n  &.active-tab {\n    background: white;\n    color: #4369f4;\n    box-shadow: 0 8rpx 24rpx rgba(0, 0, 0, 0.1);\n  }\n}\n\n.content-section {\n  flex: 1;\n  padding: 32rpx;\n}\n\n.floating-actions {\n  position: fixed;\n  right: 40rpx;\n  bottom: 120rpx;\n}\n\n.fab-button {\n  width: 100rpx;\n  height: 100rpx;\n  border-radius: 50%;\n  background: #4369f4;\n  box-shadow: 0 8rpx 24rpx rgba(66, 133, 244, 0.3);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.fab-icon {\n  font-size: 48rpx;\n}\n</style>","import MiniProgramPage from 'C:/Users/SZQ/Desktop/jinleyou_uniapp/pages/partner/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","computed","dayjs","uni","http","onShow","onMounted","MiniProgramPage"],"mappings":";;;;;;AAkEA,MAAM,aAAa,MAAW;AAC9B,MAAM,WAAW,MAAW;AAC5B,MAAM,iBAAiB,MAAW;;;;AAElC,UAAM,YAAYA,cAAAA,IAAI,OAAO;AAC7B,UAAM,YAAYA,cAAAA,IAAI,KAAK;AAC3B,UAAM,QAAQA,cAAAA,IAAI,CAAA,CAAE;AACpB,UAAM,SAASA,cAAAA,IAAI,CAAA,CAAE;AACrB,UAAM,WAAW,MAAM;AACrB,cAAQ,IAAI,CAAC,WAAY,GAAE,YAAW,CAAE,CAAC;AAAA,IAC3C;AAEA,UAAM,gBAAgBC,cAAQ,SAAC,MAAM;AACnC,aAAO,MAAM,MAAM;AAAA,QAAO,UACxBC,oBAAM,KAAK,IAAI,EAAE,cAAcA,cAAAA,QAAQ,QAAQ,KAAK,CAAC;AAAA,MACzD;AAAA,IACA,CAAC;AAED,UAAM,iBAAiBD,cAAQ,SAAC,MAAM,OAAO,KAAK;AAGlD,UAAM,mBAAmB,CAAC,SAAS;AACjCE,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK,yBAAyB,IAAI;AAAA,MACtC,CAAG;AAAA,IACH;AAEA,UAAM,YAAY,CAAC,SAAS;;AAE1B,UAAI,GAAC,kCAAM,SAAN,mBAAY,KAAI;AACjBA,sBAAc,MAAA,MAAA,SAAA,iCAAA,sBAAsB,IAAI;AACxC;AAAA,MACD;AAEHA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK,2BAA2B,KAAK,KAAK,EAAE,UAAU,mBAAmB,KAAK,KAAK,CAAC;AAAA,MACxF,CAAG;AAAA,IACH;AAGA,UAAM,YAAY,OAAO,QAAQ;AAC/B,UAAI;AACF,kBAAU,QAAQ;AAClB,cAAM,WAAW,MAAMC,SAAAA,KAAK,IAAI,GAAG;AACnC,eAAO,SAAS,QAAQ;MACzB,SAAQ,OAAO;AACdD,sBAAA,MAAA,MAAA,SAAA,kCAAc,WAAW,KAAK;AAC9B,eAAO;MACX,UAAY;AACR,kBAAU,QAAQ;AAAA,MACnB;AAAA,IACH;AAEA,UAAM,aAAa,YAAY;AAC7B,YAAM,QAAQ,MAAM,UAAU,mBAAmB;AAAA,IACnD;AAEA,UAAM,cAAc,YAAY;AAC9B,aAAO,QAAQ,MAAM,UAAU,qBAAqB;AAAA,IACtD;AACAE,kBAAAA,OAAO,MAAM;AACX;IACF,CAAC;AACDC,kBAAAA,UAAU,MAAM;AACd,cAAQ,IAAI,CAAC,WAAY,GAAE,YAAW,CAAE,CAAC;AAAA,IAC3C,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClID,GAAG,WAAWC,SAAe;"}