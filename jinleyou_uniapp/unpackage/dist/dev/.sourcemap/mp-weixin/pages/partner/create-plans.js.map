{"version":3,"file":"create-plans.js","sources":["pages/partner/create-plans.vue","../Programming/HBuilderX.4.57.2025032507/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcGFydG5lci9jcmVhdGUtcGxhbnMudnVl"],"sourcesContent":["<template>\n  <view class=\"form-container\">\n    <scroll-view class=\"form-scroll\" scroll-y>\n      <view class=\"form-body\">\n        <!-- 计划标题 -->\n        <form-field label=\"计划标题\" required>\n          <view class=\"field-tips\">为您的旅行计划起一个吸引人的名称</view>\n          <input \n            v-model=\"form.title\"\n            placeholder=\"例如：周末古文化街摄影之旅\"\n            class=\"form-input\"\n          />\n        </form-field>\n\n        <!-- 出发日期 -->\n        <form-field label=\"出发日期\" required>\n          <view class=\"field-tips\">请选择旅行开始的具体日期</view>\n          <picker mode=\"date\" @change=\"onDateChange\">\n            <view class=\"picker-box\">\n              {{ form.date || '请选择日期' }}\n            </view>\n          </picker>\n        </form-field>\n\n        <!-- 目的地 -->\n        <form-field label=\"目的地\" required>\n          <view class=\"field-tips\">天津热门文化地标选择</view>\n          <picker mode=\"selector\" :range=\"tianjinPlaces\" @change=\"onDestinationChange\">\n            <view class=\"picker-box\">\n              {{ form.destination || '请选择目的地' }}\n            </view>\n          </picker>\n        </form-field>\n\n        <!-- 旅行偏好 -->\n        <form-field label=\"旅行偏好\" required>\n          <view class=\"field-tips\">选择最符合本次旅行的主题类型</view>\n          <picker mode=\"selector\" :range=\"preferenceOptions\" @change=\"onPreferenceChange\">\n            <view class=\"picker-box\">\n              {{ form.preference || '请选择偏好' }}\n            </view>\n          </picker>\n        </form-field>\n\n        <!-- 计划描述 -->\n        <form-field label=\"计划描述\" required>\n          <view class=\"field-tips\">包含行程安排、注意事项等重要信息</view>\n          <textarea\n            v-model=\"form.description\"\n            placeholder=\"请描述你的旅行计划（行程安排、注意事项等）\"\n            class=\"form-textarea\"\n            auto-height\n          />\n        </form-field>\n      </view>\n    </scroll-view>\n\n    <view class=\"form-footer\">\n      <button class=\"submit-button\" @click=\"submitForm\">立即发布</button>\n    </view>\n\n    <loading-overlay :visible=\"isLoading\" />\n  </view>\n</template>\n\n<script setup>\nimport { ref } from 'vue';\nimport { http } from '@/api/http';\n\nconst form = ref({\n  title: '',\n  date: '',\n  destination: '',\n  preference: '',\n  description: ''\n});\n\nconst isLoading = ref(false);\nconst tianjinPlaces = ['五大道', '意式风情街', '天津之眼', '古文化街', '盘山'];\nconst preferenceOptions = ['美食', '历史', '自然', '摄影', '亲子'];\n\nconst onDateChange = (e) => {\n  form.value.date = e.detail.value;\n};\n\nconst onDestinationChange = (e) => {\n  form.value.destination = tianjinPlaces[e.detail.value];\n};\n\nconst onPreferenceChange = (e) => {\n  form.value.preference = preferenceOptions[e.detail.value];\n};\n\nconst submitForm = async () => {\n  if (!validateForm()) return;\n\n  try {\n    isLoading.value = true;\n    await http.post('/api/travel-plans', form.value);\n    uni.showToast({ title: '发布成功', icon: 'success' });\n    setTimeout(() => uni.navigateBack(), 1500);\n  } catch (error) {\n    handleError(error);\n  } finally {\n    isLoading.value = false;\n  }\n};\n\nconst validateForm = () => {\n  const fields = [\n    { key: 'title', message: '请填写计划标题' },\n    { key: 'date', message: '请选择出发日期' },\n    { key: 'destination', message: '请选择目的地' },\n    { key: 'preference', message: '请选择旅行偏好' },\n    { key: 'description', message: '请填写计划描述' }\n  ];\n\n  for (const field of fields) {\n    if (!form.value[field.key]) {\n      uni.showToast({ title: field.message, icon: 'none' });\n      return false;\n    }\n  }\n  return true;\n};\n\nconst handleError = (error) => {\n  console.error('提交失败:', error);\n  uni.showToast({\n    title: `发布失败: ${error.message || '未知错误'}`,\n    icon: 'none',\n    duration: 3000\n  });\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.form-container {\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  background: #f8fafc;\n}\n\n.form-scroll {\n  flex: 1;\n}\n\n.form-body {\n  padding: 32rpx 32rpx 120rpx;\n}\n\n.form-footer {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  padding: 24rpx 32rpx;\n  background: #ffffff;\n  box-shadow: 0 -4rpx 12rpx rgba(0, 0, 0, 0.05);\n}\n\n.submit-button {\n  background: linear-gradient(135deg, #4369f4, #304ffe);\n  color: white;\n  border-radius: 48rpx;\n  padding: 28rpx;\n  font-size: 32rpx;\n  font-weight: 500;\n  box-shadow: 0 4rpx 16rpx rgba(67, 105, 244, 0.3);\n}\n\n.field-tips {\n  font-size: 26rpx;\n  color: #94a3b8;\n  margin: 12rpx 0 20rpx;\n  line-height: 1.4;\n}\n\n.picker-box {\n  padding: 28rpx;\n  border: 2rpx solid #e2e8f0;\n  border-radius: 12rpx;\n  color: #334155;\n  font-size: 30rpx;\n  transition: all 0.2s;\n  \n  &:active {\n    background-color: #f1f5f9;\n  }\n  \n  &::after {\n    content: '›';\n    transform: rotate(90deg) translateY(-50%);\n    right: 28rpx;\n    font-size: 36rpx;\n  }\n}\n\n.form-input,\n.form-textarea {\n  padding: 28rpx;\n  border: 2rpx solid #e2e8f0;\n  border-radius: 12rpx;\n  font-size: 30rpx;\n  color: #1e293b;\n  \n  &::placeholder {\n    color: #cbd5e1;\n  }\n}\n\n.form-textarea {\n  min-height: 240rpx;\n  line-height: 1.6;\n}\n</style>","import MiniProgramPage from 'C:/Users/SZQ/Desktop/jinleyou_uniapp/pages/partner/create-plans.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","http","uni"],"mappings":";;;;;;;;;;;AAqEA,UAAM,OAAOA,cAAAA,IAAI;AAAA,MACf,OAAO;AAAA,MACP,MAAM;AAAA,MACN,aAAa;AAAA,MACb,YAAY;AAAA,MACZ,aAAa;AAAA,IACf,CAAC;AAED,UAAM,YAAYA,cAAAA,IAAI,KAAK;AAC3B,UAAM,gBAAgB,CAAC,OAAO,SAAS,QAAQ,QAAQ,IAAI;AAC3D,UAAM,oBAAoB,CAAC,MAAM,MAAM,MAAM,MAAM,IAAI;AAEvD,UAAM,eAAe,CAAC,MAAM;AAC1B,WAAK,MAAM,OAAO,EAAE,OAAO;AAAA,IAC7B;AAEA,UAAM,sBAAsB,CAAC,MAAM;AACjC,WAAK,MAAM,cAAc,cAAc,EAAE,OAAO,KAAK;AAAA,IACvD;AAEA,UAAM,qBAAqB,CAAC,MAAM;AAChC,WAAK,MAAM,aAAa,kBAAkB,EAAE,OAAO,KAAK;AAAA,IAC1D;AAEA,UAAM,aAAa,YAAY;AAC7B,UAAI,CAAC,aAAY;AAAI;AAErB,UAAI;AACF,kBAAU,QAAQ;AAClB,cAAMC,SAAI,KAAC,KAAK,qBAAqB,KAAK,KAAK;AAC/CC,sBAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,UAAS,CAAE;AAChD,mBAAW,MAAMA,cAAG,MAAC,aAAc,GAAE,IAAI;AAAA,MAC1C,SAAQ,OAAO;AACd,oBAAY,KAAK;AAAA,MACrB,UAAY;AACR,kBAAU,QAAQ;AAAA,MACnB;AAAA,IACH;AAEA,UAAM,eAAe,MAAM;AACzB,YAAM,SAAS;AAAA,QACb,EAAE,KAAK,SAAS,SAAS,UAAW;AAAA,QACpC,EAAE,KAAK,QAAQ,SAAS,UAAW;AAAA,QACnC,EAAE,KAAK,eAAe,SAAS,SAAU;AAAA,QACzC,EAAE,KAAK,cAAc,SAAS,UAAW;AAAA,QACzC,EAAE,KAAK,eAAe,SAAS,UAAW;AAAA,MAC9C;AAEE,iBAAW,SAAS,QAAQ;AAC1B,YAAI,CAAC,KAAK,MAAM,MAAM,GAAG,GAAG;AAC1BA,8BAAI,UAAU,EAAE,OAAO,MAAM,SAAS,MAAM,OAAM,CAAE;AACpD,iBAAO;AAAA,QACR;AAAA,MACF;AACD,aAAO;AAAA,IACT;AAEA,UAAM,cAAc,CAAC,UAAU;AAC7BA,oBAAc,MAAA,MAAA,SAAA,yCAAA,SAAS,KAAK;AAC5BA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO,SAAS,MAAM,WAAW,MAAM;AAAA,QACvC,MAAM;AAAA,QACN,UAAU;AAAA,MACd,CAAG;AAAA,IACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpIA,GAAG,WAAW,eAAe;"}