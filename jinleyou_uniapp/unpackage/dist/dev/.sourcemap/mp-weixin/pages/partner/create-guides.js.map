{"version":3,"file":"create-guides.js","sources":["pages/partner/create-guides.vue","../Programming/HBuilderX.4.57.2025032507/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcGFydG5lci9jcmVhdGUtZ3VpZGVzLnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"form-container\">\n    <scroll-view class=\"form-scroll\" scroll-y>\n      <view class=\"form-body\">\n\n        <!-- 服务景点 -->\n        <form-field label=\"服务景点\" required>\n          <view class=\"field-tips\">请选择天津热门文化景点</view>\n          <picker \n            mode=\"selector\" \n            :range=\"destinations\" \n            @change=\"handleDestinationChange\"\n          >\n            <view class=\"picker-box\">\n              {{ form.destination || '请选择景点' }}\n            </view>\n          </picker>\n        </form-field>\n\n        <!-- 服务日期 -->\n        <form-field label=\"服务日期\" required>\n          <view class=\"field-tips\">请选择可提供服务的时间</view>\n          <picker mode=\"date\" @change=\"handleDateChange\">\n            <view class=\"picker-box\">\n              {{ form.serviceDate || '请选择日期' }}\n            </view>\n          </picker>\n        </form-field>\n\n        <!-- 服务类型 -->\n        <form-field label=\"服务类型\" required>\n          <view class=\"field-tips\">选择您提供的主要服务形式</view>\n          <picker\n            mode=\"selector\"\n            :range=\"serviceTypeOptions\"\n            @change=\"handleTypeChange\"\n          >\n            <view class=\"picker-box\">\n              {{ form.type || '请选择服务类型' }}\n            </view>\n          </picker>\n        </form-field>\n\n        <!-- 服务时长 -->\n        <form-field label=\"服务时长\" required>\n          <view class=\"field-tips\">请选择服务时长（1-8小时）</view>\n          <picker\n            mode=\"selector\"\n            :range=\"durationOptions\"\n            @change=\"handleDurationChange\"\n          >\n            <view class=\"picker-box\">\n              {{ form.duration ? `${form.duration}小时` : '请选择时长' }}\n            </view>\n          </picker>\n        </form-field>\n\n        <!-- 服务价格 -->\n        <form-field label=\"服务价格\" required>\n          <view class=\"field-tips\">请输入合理的收费标准（元/天）</view>\n          <input\n            v-model.number=\"form.price\"\n            type=\"number\"\n            class=\"form-input\"\n            placeholder=\"例如：500\"\n          />\n        </form-field>\n\n        <!-- 服务描述 -->\n        <form-field label=\"服务描述\" required>\n          <view class=\"field-tips\">包含服务内容、注意事项等重要信息</view>\n          <textarea\n            v-model=\"form.description\"\n            class=\"form-textarea\"\n            placeholder=\"详细描述您的服务内容...\"\n            auto-height\n          />\n        </form-field>\n      </view>\n    </scroll-view>\n\n    <view class=\"form-footer\">\n      <button class=\"submit-button\" @click=\"submitForm\">立即发布</button>\n    </view>\n\n    <loading-overlay :visible=\"isSubmitting\" />\n  </view>\n</template>\n\n<script setup>\nimport { ref } from 'vue';\nimport { http } from '@/api/http';\n\nconst form = ref({\n  destination: '',\n  serviceDate: '',\n  type: '',\n  duration: null,\n  price: null,\n  description: ''\n});\n\nconst isSubmitting = ref(false);\nconst destinations = ref([\n    '天津之眼',\r\n\t'五大道', \r\n\t'古文化街',\n    '意式风情街',\n    '海河游船',\n    '瓷房子',\r\n\t'天津博物馆',\r\n\t'盘山'\n]);\nconst serviceTypeOptions = ['历史讲解', '美食导览', '城市观光', '户外探险'];\nconst durationOptions = Array.from({length: 8}, (_, i) => i + 1);\n\nconst validateForm = () => {\n  const requiredFields = [\n    { key: 'destination', message: '请选择服务景点' },\n    { key: 'serviceDate', message: '请选择服务日期' },\n    { key: 'type', message: '请选择服务类型' },\n    { key: 'duration', message: '请选择服务时长' },\n    { key: 'price', message: '请填写服务价格' },\n    { key: 'description', message: '请填写服务描述' }\n  ];\n\n  for (const field of requiredFields) {\n    if (!form.value[field.key]) {\n      uni.showToast({ title: field.message, icon: 'none' });\n      return false;\n    }\n  }\n\n  if (form.value.price < 0) {\n    uni.showToast({ title: '价格需大于0元', icon: 'none' });\n    return false;\n  }\n  \n  return true;\n};\n\nconst submitForm = async () => {\n  if (!validateForm()) return;\n\n  try {\n    isSubmitting.value = true;\n    await http.post('/api/guide-services', form.value);\n    uni.showToast({ title: '发布成功', icon: 'success' });\n    setTimeout(() => {\r\n          uni.navigateBack({\r\n            success() {\r\n              const pages = getCurrentPages();\r\n              const prevPage = pages[pages.length - 1];\r\n              if (prevPage.$vm?.handleRefresh) {\r\n                prevPage.$vm.handleRefresh();\r\n              }\r\n            }\r\n          });\r\n        }, 1500);\n  } catch (error) {\n    console.error('提交失败:', error);\n    uni.showToast({\n      title: `发布失败: ${error.message || '未知错误'}`,\n      icon: 'none',\n      duration: 3000\n    });\n  } finally {\n    isSubmitting.value = false;\n  }\n};\n\n// 事件处理\nconst handleDestinationChange = (e) => {\n  const index = e.detail.value;\n  form.value.destination = destinations.value[index];\n};\n\nconst handleDateChange = (e) => {\n  form.value.serviceDate = e.detail.value;\n};\n\nconst handleTypeChange = (e) => {\n  const index = e.detail.value;\n  form.value.type = serviceTypeOptions[index];\n};\n\nconst handleDurationChange = (e) => {\n  const index = e.detail.value;\n  form.value.duration = durationOptions[index];\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.form-container {\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  background: #f8fafc;\n}\n\n.form-scroll {\n  flex: 1;\n}\n\n.form-body {\n  padding: 32rpx 32rpx 120rpx;\n}\n\n.form-footer {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  padding: 24rpx 32rpx;\n  background: #ffffff;\n  box-shadow: 0 -4rpx 12rpx rgba(0, 0, 0, 0.05);\n}\n\n.submit-button {\n  background: linear-gradient(135deg, #4369f4, #304ffe);\n  color: white;\n  border-radius: 48rpx;\n  padding: 28rpx;\n  font-size: 32rpx;\n  font-weight: 500;\n  box-shadow: 0 4rpx 16rpx rgba(67, 105, 244, 0.3);\n}\n\n.field-tips {\n  font-size: 26rpx;\n  color: #94a3b8;\n  margin: 12rpx 0 20rpx;\n  line-height: 1.4;\n}\n\n.picker-box {\n  padding: 28rpx;\n  border: 2rpx solid #e2e8f0;\n  border-radius: 12rpx;\n  color: #334155;\n  font-size: 30rpx;\n  transition: all 0.2s;\n  \n  &:active {\n    background-color: #f1f5f9;\n  }\n}\n\n.form-input,\n.form-textarea {\n  padding: 28rpx;\n  border: 2rpx solid #e2e8f0;\n  border-radius: 12rpx;\n  font-size: 30rpx;\n  color: #1e293b;\n  \n  &::placeholder {\n    color: #cbd5e1;\n  }\n}\n\n.form-textarea {\n  min-height: 240rpx;\n  line-height: 1.6;\n}\n</style>","import MiniProgramPage from 'C:/Users/SZQ/Desktop/jinleyou_uniapp/pages/partner/create-guides.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","http"],"mappings":";;;;;;;;;;;AA6FA,UAAM,OAAOA,cAAAA,IAAI;AAAA,MACf,aAAa;AAAA,MACb,aAAa;AAAA,MACb,MAAM;AAAA,MACN,UAAU;AAAA,MACV,OAAO;AAAA,MACP,aAAa;AAAA,IACf,CAAC;AAED,UAAM,eAAeA,cAAAA,IAAI,KAAK;AAC9B,UAAM,eAAeA,cAAAA,IAAI;AAAA,MACrB;AAAA,MACH;AAAA,MACA;AAAA,MACG;AAAA,MACA;AAAA,MACA;AAAA,MACH;AAAA,MACA;AAAA,IACD,CAAC;AACD,UAAM,qBAAqB,CAAC,QAAQ,QAAQ,QAAQ,MAAM;AAC1D,UAAM,kBAAkB,MAAM,KAAK,EAAC,QAAQ,EAAC,GAAG,CAAC,GAAG,MAAM,IAAI,CAAC;AAE/D,UAAM,eAAe,MAAM;AACzB,YAAM,iBAAiB;AAAA,QACrB,EAAE,KAAK,eAAe,SAAS,UAAW;AAAA,QAC1C,EAAE,KAAK,eAAe,SAAS,UAAW;AAAA,QAC1C,EAAE,KAAK,QAAQ,SAAS,UAAW;AAAA,QACnC,EAAE,KAAK,YAAY,SAAS,UAAW;AAAA,QACvC,EAAE,KAAK,SAAS,SAAS,UAAW;AAAA,QACpC,EAAE,KAAK,eAAe,SAAS,UAAW;AAAA,MAC9C;AAEE,iBAAW,SAAS,gBAAgB;AAClC,YAAI,CAAC,KAAK,MAAM,MAAM,GAAG,GAAG;AAC1BC,8BAAI,UAAU,EAAE,OAAO,MAAM,SAAS,MAAM,OAAM,CAAE;AACpD,iBAAO;AAAA,QACR;AAAA,MACF;AAED,UAAI,KAAK,MAAM,QAAQ,GAAG;AACxBA,sBAAG,MAAC,UAAU,EAAE,OAAO,WAAW,MAAM,OAAM,CAAE;AAChD,eAAO;AAAA,MACR;AAED,aAAO;AAAA,IACT;AAEA,UAAM,aAAa,YAAY;AAC7B,UAAI,CAAC,aAAY;AAAI;AAErB,UAAI;AACF,qBAAa,QAAQ;AACrB,cAAMC,SAAI,KAAC,KAAK,uBAAuB,KAAK,KAAK;AACjDD,sBAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,UAAS,CAAE;AAChD,mBAAW,MAAM;AACXA,wBAAAA,MAAI,aAAa;AAAA,YACf,UAAU;;AACR,oBAAM,QAAQ;AACd,oBAAM,WAAW,MAAM,MAAM,SAAS,CAAC;AACvC,mBAAI,cAAS,QAAT,mBAAc,eAAe;AAC/B,yBAAS,IAAI;cACd;AAAA,YACF;AAAA,UACb,CAAW;AAAA,QACF,GAAE,IAAI;AAAA,MACZ,SAAQ,OAAO;AACdA,qFAAc,SAAS,KAAK;AAC5BA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO,SAAS,MAAM,WAAW,MAAM;AAAA,UACvC,MAAM;AAAA,UACN,UAAU;AAAA,QAChB,CAAK;AAAA,MACL,UAAY;AACR,qBAAa,QAAQ;AAAA,MACtB;AAAA,IACH;AAGA,UAAM,0BAA0B,CAAC,MAAM;AACrC,YAAM,QAAQ,EAAE,OAAO;AACvB,WAAK,MAAM,cAAc,aAAa,MAAM,KAAK;AAAA,IACnD;AAEA,UAAM,mBAAmB,CAAC,MAAM;AAC9B,WAAK,MAAM,cAAc,EAAE,OAAO;AAAA,IACpC;AAEA,UAAM,mBAAmB,CAAC,MAAM;AAC9B,YAAM,QAAQ,EAAE,OAAO;AACvB,WAAK,MAAM,OAAO,mBAAmB,KAAK;AAAA,IAC5C;AAEA,UAAM,uBAAuB,CAAC,MAAM;AAClC,YAAM,QAAQ,EAAE,OAAO;AACvB,WAAK,MAAM,WAAW,gBAAgB,KAAK;AAAA,IAC7C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5LA,GAAG,WAAW,eAAe;"}