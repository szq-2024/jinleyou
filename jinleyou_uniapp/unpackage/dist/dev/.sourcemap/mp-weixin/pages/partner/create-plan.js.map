{"version":3,"file":"create-plan.js","sources":["pages/partner/create-plan.vue","../Programming/HBuilderX.4.57.2025032507/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcGFydG5lci9jcmVhdGUtcGxhbi52dWU"],"sourcesContent":["<template>\n  <view class=\"form-container\">\n    <nav class=\"form-nav\">\n      <text class=\"nav-back\" @click=\"goBack\">❮</text>\n      <text class=\"nav-title\">发布旅行计划</text>\n    </nav>\n\n    <scroll-view class=\"form-scroll\" scroll-y>\n      <view class=\"form-body\">\n        <form-field label=\"计划标题\" required>\n          <input \n            v-model=\"form.title\"\n            placeholder=\"例如：周末古文化街摄影之旅\"\n            class=\"form-input\"\n          />\n        </form-field>\n\n        <form-field label=\"出发日期\" required>\n          <picker mode=\"date\" @change=\"onDateChange\">\n            <view class=\"picker-box\">\n              {{ form.date || '请选择日期' }}\n            </view>\n          </picker>\n        </form-field>\n\n        <form-field label=\"目的地\" required>\n          <picker mode=\"selector\" :range=\"tianjinPlaces\" @change=\"onDestinationChange\">\n            <view class=\"picker-box\">\n              {{ form.destination || '请选择目的地' }}\n            </view>\n          </picker>\n        </form-field>\n\n        <form-field label=\"旅行偏好\" required>\n          <picker mode=\"selector\" :range=\"preferenceOptions\" @change=\"onPreferenceChange\">\n            <view class=\"picker-box\">\n              {{ form.preference || '请选择偏好' }}\n            </view>\n          </picker>\n        </form-field>\n\n        <form-field label=\"计划描述\" required>\n          <textarea\n            v-model=\"form.description\"\n            placeholder=\"请描述你的旅行计划（行程安排、注意事项等）\"\n            class=\"form-textarea\"\n            auto-height\n          />\n        </form-field>\n      </view>\n    </scroll-view>\n\n    <view class=\"form-footer\">\n      <button class=\"submit-button\" @click=\"submitForm\">立即发布</button>\n    </view>\n\n    <loading-overlay :visible=\"isLoading\" />\n  </view>\n</template>\n\n<script setup>\nimport { ref } from 'vue';\nimport { http } from '@/api/http';\n\nconst form = ref({\n  title: '',\n  date: '',\n  destination: '',\n  preference: '',\n  description: ''\n});\n\nconst isLoading = ref(false);\nconst tianjinPlaces = ['五大道', '意式风情街', '天津之眼', '古文化街'];\nconst preferenceOptions = ['美食', '历史', '自然', '摄影', '亲子'];\n\nconst onDateChange = (e) => {\n  form.value.date = e.detail.value;\n};\n\nconst onDestinationChange = (e) => {\n  form.value.destination = tianjinPlaces[e.detail.value];\n};\n\nconst onPreferenceChange = (e) => {\n  form.value.preference = preferenceOptions[e.detail.value];\n};\n\nconst submitForm = async () => {\n  if (!validateForm()) return;\n\n  try {\n    isLoading.value = true;\n    await http.post('/travel-plans', form.value);\n    uni.showToast({ title: '发布成功', icon: 'success' });\n    setTimeout(() => uni.navigateBack(), 1500);\n  } catch (error) {\n    handleError(error);\n  } finally {\n    isLoading.value = false;\n  }\n};\n\nconst validateForm = () => {\n  const fields = [\n    { key: 'title', message: '请填写计划标题' },\n    { key: 'date', message: '请选择出发日期' },\n    { key: 'destination', message: '请选择目的地' },\n    { key: 'preference', message: '请选择旅行偏好' },\n    { key: 'description', message: '请填写计划描述' }\n  ];\n\n  for (const field of fields) {\n    if (!form.value[field.key]) {\n      uni.showToast({ title: field.message, icon: 'none' });\n      return false;\n    }\n  }\n  return true;\n};\n\nconst handleError = (error) => {\n  console.error('提交失败:', error);\n  uni.showToast({\n    title: `发布失败: ${error.message || '未知错误'}`,\n    icon: 'none',\n    duration: 3000\n  });\n};\n\nconst goBack = () => {\n  uni.navigateBack();\n};\n</script>\n\n<style lang=\"scss\">\n.form-container {\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  background: #ffffff;\n}\n\n.form-nav {\n  padding: 32rpx;\n  border-bottom: 2rpx solid #f0f2f5;\n  display: flex;\n  align-items: center;\n  \n  .nav-back {\n    font-size: 40rpx;\n    margin-right: 24rpx;\n  }\n  \n  .nav-title {\n    font-size: 36rpx;\n    font-weight: 500;\n  }\n}\n\n.form-scroll {\n  flex: 1;\n}\n\n.form-body {\n  padding: 32rpx;\n}\n\n.form-footer {\n  padding: 32rpx;\n  border-top: 2rpx solid #f0f2f5;\n}\n\n.submit-button {\n  background: #4369f4;\n  color: white;\n  border-radius: 16rpx;\n  padding: 24rpx;\n  font-size: 32rpx;\n}\n\n.picker-box {\n  padding: 24rpx;\n  border: 2rpx solid #e5e7eb;\n  border-radius: 16rpx;\n  position: relative;\n  \n  &::after {\n    content: '▼';\n    position: absolute;\n    right: 24rpx;\n    top: 50%;\n    transform: translateY(-50%);\n    color: #64748b;\n  }\n}\n\n.form-textarea {\n  min-height: 200rpx;\n  padding: 24rpx;\n  border: 2rpx solid #e5e7eb;\n  border-radius: 16rpx;\n}\n</style>","import MiniProgramPage from 'C:/Users/SZQ/Desktop/jinleyou_uniapp/pages/partner/create-plan.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","http","uni","MiniProgramPage"],"mappings":";;;;;;;;;;;AAgEA,UAAM,OAAOA,cAAAA,IAAI;AAAA,MACf,OAAO;AAAA,MACP,MAAM;AAAA,MACN,aAAa;AAAA,MACb,YAAY;AAAA,MACZ,aAAa;AAAA,IACf,CAAC;AAED,UAAM,YAAYA,cAAAA,IAAI,KAAK;AAC3B,UAAM,gBAAgB,CAAC,OAAO,SAAS,QAAQ,MAAM;AACrD,UAAM,oBAAoB,CAAC,MAAM,MAAM,MAAM,MAAM,IAAI;AAEvD,UAAM,eAAe,CAAC,MAAM;AAC1B,WAAK,MAAM,OAAO,EAAE,OAAO;AAAA,IAC7B;AAEA,UAAM,sBAAsB,CAAC,MAAM;AACjC,WAAK,MAAM,cAAc,cAAc,EAAE,OAAO,KAAK;AAAA,IACvD;AAEA,UAAM,qBAAqB,CAAC,MAAM;AAChC,WAAK,MAAM,aAAa,kBAAkB,EAAE,OAAO,KAAK;AAAA,IAC1D;AAEA,UAAM,aAAa,YAAY;AAC7B,UAAI,CAAC,aAAY;AAAI;AAErB,UAAI;AACF,kBAAU,QAAQ;AAClB,cAAMC,SAAI,KAAC,KAAK,iBAAiB,KAAK,KAAK;AAC3CC,sBAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,UAAS,CAAE;AAChD,mBAAW,MAAMA,cAAG,MAAC,aAAc,GAAE,IAAI;AAAA,MAC1C,SAAQ,OAAO;AACd,oBAAY,KAAK;AAAA,MACrB,UAAY;AACR,kBAAU,QAAQ;AAAA,MACnB;AAAA,IACH;AAEA,UAAM,eAAe,MAAM;AACzB,YAAM,SAAS;AAAA,QACb,EAAE,KAAK,SAAS,SAAS,UAAW;AAAA,QACpC,EAAE,KAAK,QAAQ,SAAS,UAAW;AAAA,QACnC,EAAE,KAAK,eAAe,SAAS,SAAU;AAAA,QACzC,EAAE,KAAK,cAAc,SAAS,UAAW;AAAA,QACzC,EAAE,KAAK,eAAe,SAAS,UAAW;AAAA,MAC9C;AAEE,iBAAW,SAAS,QAAQ;AAC1B,YAAI,CAAC,KAAK,MAAM,MAAM,GAAG,GAAG;AAC1BA,8BAAI,UAAU,EAAE,OAAO,MAAM,SAAS,MAAM,OAAM,CAAE;AACpD,iBAAO;AAAA,QACR;AAAA,MACF;AACD,aAAO;AAAA,IACT;AAEA,UAAM,cAAc,CAAC,UAAU;AAC7BA,oBAAc,MAAA,MAAA,SAAA,wCAAA,SAAS,KAAK;AAC5BA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO,SAAS,MAAM,WAAW,MAAM;AAAA,QACvC,MAAM;AAAA,QACN,UAAU;AAAA,MACd,CAAG;AAAA,IACH;AAEA,UAAM,SAAS,MAAM;AACnBA,oBAAG,MAAC,aAAY;AAAA,IAClB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnIA,GAAG,WAAWC,SAAe;"}